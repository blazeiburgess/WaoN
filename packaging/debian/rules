#!/usr/bin/make -f

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

# Enable hardening
export DEB_BUILD_MAINT_OPTIONS = hardening=+all

%:
	dh $@ --buildsystem=cmake --parallel

override_dh_auto_configure:
	dh_auto_configure -- \
		-DCMAKE_BUILD_TYPE=Release \
		-DBUILD_WAON=ON \
		-DBUILD_PV=ON \
		-DBUILD_GWAON=ON \
		-DBUILD_SHARED_LIB=ON \
		-DBUILD_PYTHON_BINDINGS=ON

override_dh_auto_install:
	dh_auto_install
	# Install Python module
	cd python && python3 setup.py install --root=$(CURDIR)/debian/python3-waon --install-layout=deb

override_dh_shlibdeps:
	dh_shlibdeps --dpkg-shlibdeps-params=--ignore-missing-info